window.imaginoTag=function(){"use strict";var t={687:function(t,e,n){n.r(e),n.d(e,{getTracker:function(){return _},pageView:function(){return h},pushEvent:function(){return w},setUserIdentity:function(){return y}});var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function i(){if(!o)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)}for(var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(t){return"string"==typeof t&&a.test(t)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var d=function(t,e,n){var o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=o[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n}(o)},f="imo:deviceID",p="imo:sessionID",l="imo:userID",g=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverEndpoint=void 0,this._logEvent=function(){if(n._serverEndpoint)try{var t=new XMLHttpRequest;t.open("POST",n._serverEndpoint,!0);var e=JSON.stringify(n._content);t.send(e)}catch(t){console.log("[warning] failed to log '".concat(event,"' - root cause ").concat(t,"â€¦"))}},this._clearOptions=function(){delete n._content.data.event,delete n._content.data.page},this.page=function(t,e){t||(t=window.location.pathname+window.location.hash),(n._content.page!==t||e)&&(n._content.page=t,n._content.host=window.location.host,delete n._content.evtValue,n._content.data.location=window.location,n._clearOptions(),e&&(n._content.data.page=e),n._logEvent())},this.pushEvent=function(t,e,o){n._content.eventType=t,n._content.eventValue=e,n._content.host=window.location.host,delete n._content.page,delete n._content.data.location,n._clearOptions(),o&&(n._content.data.event=o),n._logEvent()},this.identify=function(t,e){var o=window.localStorage;n._content.userId=t,e?n._content.data.userOptions=e:delete n._content.data.userOptions,t?o.setItem(l,t):o.removeItem(l)},this.registerHandlers=function(){n._registered||(window.addEventListener("load",(function(){return n.page()})),window.addEventListener("hashchange",(function(){return n.page()})),n._registered=!0)},this._registered=!1,e||(e="https://tag.imagino.com/jzGfZRelQDCsB8cfBfIWoA==/events"),this._serverEndpoint=e;var o=window.localStorage,r=window.sessionStorage,i=o.getItem(f)||d(),a=r.getItem(p)||d();this._content={data:{},deviceId:i,sessionId:a},o.setItem(f,i),r.setItem(p,a)},v=null;function _(){return v||(v=new g),v}function h(t,e){_().page(t,e)}function w(t,e,n){_().pushEvent(t,e,n)}function y(t,e){_().identify(t,e)}}},e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}return n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(687)}();